document.addEventListener("DOMContentLoaded",(function(){function setCookie(name,value,days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1e3);var expires="; expires="+date.toGMTString();document.cookie=name+"="+value+expires+";path=/"}function getParam(p){var match=RegExp("[?&]"+p+"=([^&]*)").exec(window.location.search);return match&&decodeURIComponent(match[1].replace(/\+/g," "))}var yclid=getParam("yclid");console.log(yclid);if(yclid){setCookie("yclid",yclid,90)}let vh=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${vh}px`);window.addEventListener("resize",(()=>{let vh=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${vh}px`)}));window.triggerEvent=(el,event,options={bubbles:true,cancelable:false})=>el.dispatchEvent(new Event(event,options));window.getCookie=name=>{let matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined};window.setCookie=(name,value,options={})=>{options={path:"/",...options};if(options.expires instanceof Date){options.expires=options.expires.toUTCString()}let updatedCookie=encodeURIComponent(name)+"="+encodeURIComponent(value);for(let optionKey in options){updatedCookie+="; "+optionKey;let optionValue=options[optionKey];if(optionValue!==true){updatedCookie+="="+optionValue}}document.cookie=updatedCookie};window.deleteCookie=name=>{setCookie(name,"",{"max-age":-1})};window.pluralFormat=(num,one,two,many)=>{const endOnOne=num%10===1&&num%100!==11;const endOnTwo=num%10>=2&&num%10<=4&&(num%100<10||num%100>=20);const notOne=endOnTwo?two:many;return endOnOne?one:notOne};window.showAjaxLoader=()=>{const loader=document.getElementById("ajax-loader").content.cloneNode(true);document.body.classList.add("-locked");document.body.append(loader)};window.hideAjaxLoader=()=>{const loader=document.body.querySelector(".ajax-loader");loader.remove();document.body.classList.remove("-locked")};window.isFancyOpen=false;window.initialFancyBox=(src,className)=>new Fancybox([{src:src,type:"html",dragToClose:false}],{mainClass:className,l10n:{CLOSE:"Закрыть",MODAL:"Вы можете закрыть это окно, нажав кнопку ESC",ERROR:"Что-то пошло не так, попробуйте позднее"},on:{ready:()=>{window.isFancyOpen=true},destroy:()=>{window.isFancyOpen=false}}});window.showNotify=(heading,message,type)=>{if(typeof heading==="undefined"&&typeof message==="undefined")throw TypeError("Heading or message is undefined");const notify=document.getElementById("notify").content.cloneNode(true),notifyIcon=notify.querySelector(".notify__status .icon use"),notifyBtn=notify.querySelector(".notify__button");notify.querySelector(".notify__heading").textContent=heading;notify.querySelector(".notify__message").textContent=message;let className,iconName,btnText="Понятно";switch(type){case"success":className="-success";iconName="toast-success";btnText="Отлично";break;case"danger":className="-danger";iconName="toast-danger";btnText="Повторить";break;default:className="-info";iconName="toast-info"}notify.querySelector(".notify").classList.add(className);notifyIcon.setAttribute("xlink:href",notifyIcon.getAttribute("xlink:href").replace(/(^.*?#).*?$/g,`$1${iconName}`));notifyBtn.classList.add(`btn${className}`);notifyBtn.textContent=btnText;const div=document.createElement("div");div.append(notify);initialFancyBox(div,"-notify")};window.showToast=(title,description,type,autoHide=true,delay=5e3)=>{if(typeof title==="undefined"&&typeof description==="undefined")throw TypeError("Title or description is undefined");const toastContainer=document.querySelector(".toast-container"),toast=document.getElementById("toast").content.cloneNode(true),toastTitle=toast.querySelector("strong"),toastDescription=toast.querySelector(".toast-body"),toastIconSvg=toast.querySelector(".svg-icon"),toastIconUse=toast.querySelector(".svg-icon use");toastTitle.textContent=title;toastDescription.textContent=description;let className;switch(type){case"success":className="success";break;case"danger":className="danger";break;default:className="info"}toastTitle.classList.add(`text-${className}`);toastIconSvg.classList.add(`bg-${className}`);toastIconUse.setAttribute("xlink:href",toastIconUse.getAttribute("xlink:href").replace(/(^.*?#).*?$/g,`$1toast-${className}`));const div=document.createElement("div");div.append(toast);const toastHtml=div.querySelector(".toast");toastContainer.append(toastHtml);const bsToast=new bootstrap.Toast(toastHtml,{autohide:autoHide,delay:delay});bsToast.show();if(autoHide&&typeof delay==="number"){setTimeout((()=>{bsToast._element.remove()}),delay+1)}};window.throttle=function(func,ms){let isThrottled=false,savedArgs,savedThis;function wrapper(){if(isThrottled){savedArgs=arguments;savedThis=this;return}func.apply(this,arguments);isThrottled=true;setTimeout((function(){isThrottled=false;if(savedArgs){wrapper.apply(savedThis,savedArgs);savedArgs=savedThis=null}}),ms)}return wrapper};window.fetchRequest=async function(url,options){showAjaxLoader();return await fetch(url,options).then((response=>{if(response.ok)return response})).catch((err=>{showNotify("Упс...","Что-то пошло не так, попробуйте ещё раз","danger");console.error(`Fetch Error: ${err}`)})).finally((()=>{hideAjaxLoader()}))};window.addPhoneMask=()=>{const phoneField=document.querySelectorAll('input[type="tel"], input[name="phone"], input[name="property_phone"], input[data-mask="phone"]');if(phoneField.length>0){phoneField.forEach((el=>{if(navigator.userAgent.search(/YaBrowser/)>0){el.setAttribute("autocomplete","off-for-yandex")}if(!el.mask){el.mask=IMask(el,{mask:[{mask:"+{7} (000) 000-00-00",country:"Russia",startsWith:"8",prepare:(appended,masked)=>{if(appended==="8"&&masked.value===""){return"7"}return appended}},{mask:"+7 (000) 000-00-00",startsWith:"+7",country:"Russia"},{mask:"+7 (000) 000-00-00",startsWith:"7",country:"Russia"},{mask:"+7 (000) 000-00-00",startsWith:"",country:"unknown"}],dispatch:function(appended,dynamicMasked){let number=(dynamicMasked.value+appended).replace(/\D/g,"");return dynamicMasked.compiledMasks.find((function(m){return number.indexOf(m.startsWith)===0}))}});el.addEventListener("input",(()=>{if(!el.getAttribute("data-start-time"))el.setAttribute("data-start-time",Date.now());el.mask.updateValue()}))}}))}};addPhoneMask();window.addInputNameMask=()=>{const inputs=document.querySelectorAll("input[name=property_name]");inputs.forEach((input=>{if(input.mask!==true){input.addEventListener("input",(()=>input.value=input.value.replace(/[^a-zA-ZА-Яа-я ]/g,"")));input.mask=true}}))};addInputNameMask();window.addBirthdayMask=()=>{const birthdayField=document.querySelectorAll('input[name="property_birthday"], input[data-mask="birthday"]');if(birthdayField.length>0){birthdayField.forEach((el=>{if(!el.mask){el.mask=IMask(el,{mask:Date,min:new Date(1990,0,1),max:new Date,lazy:false})}}))}};window.blockPasteEvent=elem=>{elem.addEventListener("paste",(e=>e.preventDefault()))};window.jsInput=form=>{const isJsInput=document.createElement("input");isJsInput.type="hidden";isJsInput.style.display="none";isJsInput.name="js_input";isJsInput.value="1";form.appendChild(isJsInput)};let personOnSiteTime=sessionStorage.getItem("personOnSiteTime")?sessionStorage.getItem("personOnSiteTime"):0;const personOnSiteInterval=setInterval((()=>{sessionStorage.setItem("personOnSiteTime",personOnSiteTime++)}),1e3);window.yaReachGoal=(goalName="sale")=>{if(window.Ya&&window.Ya.Metrika2&&window.Ya.Metrika2.counters&&typeof Object.values(window.Ya.Metrika2.counters())[0].id!=="undefined"){const arrCounters=[];Object.values(window.Ya.Metrika2.counters()).forEach((counter=>arrCounters.push(counter.id)));let target=[];if(goalName!=="sale"){target.push(goalName)}else{target.push("sale");if(typeof window.yandexIdentifiersArray==="object"&&window.yandexIdentifiersArray.length>0){target=[...target,...Object.values(window.yandexIdentifiersArray)]}}for(let targetName of target){if(targetName==="sale"){for(let counter of arrCounters)ym(counter,"reachGoal",targetName);if(personOnSiteTime>=25&&window.isLanding){for(let counter of arrCounters)ym(counter,"reachGoal","sale1")}}else{for(let counter of arrCounters)ym(counter,"reachGoal",targetName)}}}};const reachGoals=function(item){if(typeof window.gtag!=="undefined"){if(window.gtagAWId&&window.gtagConvId){window.gtag("event","conversion",{send_to:window.gtagAWId+"/"+window.gtagConvId})}const googleItem=window.googleTagScript[item]||"sale";if(window.gtagUAId)window.gtag("config",window.gtagUAId,{page_path:googleItem});window.gtag("event","hitType",{event_category:"request",event_action:"sendform",event_label:googleItem,event_url:window.location.href})}yaReachGoal();if(window._tmr){const getVkPixelId=function(){let vkPixelId="";try{const noScript=document.querySelectorAll("noscript");if(noScript.length>0){noScript.forEach((el=>{const content=el.textContent;if(content.indexOf("https://top-fwz1.mail.ru/")===-1)return;vkPixelId=content.split("counter?id=")[1].split(";")[0]}))}}catch(e){console.log(e)}return vkPixelId};const vkPixelId=getVkPixelId();window._tmr.push({id:vkPixelId,type:"reachGoal",goal:"lead"})}if(window.fbq){fbq("track","Lead")}};const reCaptchaSubmit=(form,callback)=>{const reCaptchaEl=document.querySelector(".grecaptcha-container");if(!(reCaptchaEl&&reCaptchaEl.dataset.sitekey)&&callback){return callback.call()}let reCaptchaInput=form.querySelector('[name="recaptchaResponse"]');if(!reCaptchaInput){reCaptchaInput=document.createElement("input");reCaptchaInput.setAttribute("type","hidden");reCaptchaInput.setAttribute("name","recaptchaResponse");form.appendChild(reCaptchaInput)}let captchaId;if(typeof captchaId==="undefined"){captchaId=window.grecaptcha.render(reCaptchaEl,{sitekey:reCaptchaEl.dataset.sitekey,size:"invisible"})}window.grecaptcha.ready((function(){window.grecaptcha.execute(captchaId,{action:"someForm"}).then((function(token){reCaptchaInput.value=token;if(callback)callback.call()})).catch((function(error){if(error===null&&callback)callback.call()}))}))};window.submitForm=form=>{const startTime=form.querySelector("[name=property_phone]").getAttribute("data-start-time"),numStartTime=Number(startTime),endTime=Date.now(),timeDiff=endTime-numStartTime;reCaptchaSubmit(form,(function(){if(form.classList.contains("needs-validation")){form.classList.add("was-validated");if(!form.formValidity())return}const url=form.getAttribute("action"),body=new FormData(form);if(typeof getCookie("yclid")!=="undefined"){console.log("yclid sucsess");body.append("yclid",getCookie("yclid"))}body.append("time_difference",timeDiff);if(window.modId&&window.ct){if(window.ct("calltracking_params",window.modId)){const parsedSessionId=window.ct("calltracking_params",window.modId).sessionId||"";body.append("calltouchSessionId",parsedSessionId)}}if(window.Ya&&window.Ya.Metrika2&&window.Ya.Metrika2.counters&&typeof Object.values(window.Ya.Metrika2.counters())[0].id!=="undefined"){body.append("property_YAMCOUNTER",Object.values(window.Ya.Metrika2.counters())[0].id);body.append("js_ok","sended")}if(window.hasAdBlock)body.append("has_adblock","true");body.append("submit_time",`${Math.round(personOnSiteTime/60)} min: ${Math.round(personOnSiteTime%60)} sec`);fetchRequest(url,{method:"post",body:body,headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),credentials:"same-origin"}).then((response=>response.json())).then((res=>{if(res.result==="success"){Fancybox.close();showNotify("Успех!","Ваша заявка принята в обработку. Вскоре с Вами свяжутся наши специалисты.","success");form.reset();form.querySelectorAll("input[type=tel], input[name=phone], input[name=property_phone], input[data-mask=phone]").forEach((el=>el.mask?el.mask.updateValue():""));form.querySelector("[name=property_phone]").removeAttribute("data-start-time");if(form.classList.contains("needs-validation")){form.classList.remove("was-validated")}if(numStartTime>0&&timeDiff>1e3&&!res.is_repeat&&!res.is_blocked)reachGoals();if(window.dataLayer&&typeof ecommercePurchaseData!=="undefined"){window.dataLayer.push(ecommercePurchaseData)}if(form.classList.contains("quiz__wrapper")){const detailQuiz=document.querySelector('.quiz__page[data-quiz="detail"]');document.body.classList.remove("overflow-hidden");detailQuiz.classList.remove("active")}}})).catch((err=>{Fancybox.close();showNotify("Упс...","Что-то пошло не так, попробуйте ещё раз","danger");console.error(err)}))}))};window.throttleSubmitForm=throttle(submitForm,1e3);window.formatPrice=price=>new Intl.NumberFormat("ru",{style:"decimal"}).format(Number(price));window.calcMonthlyPayment=(price,firstPayment,months,rate=window.rate)=>{firstPayment=typeof firstPayment==="undefined"?price*.3:firstPayment;months=typeof months==="undefined"?84:months;return rate===0?Math.ceil((price-firstPayment)/months):Math.ceil(rate/1200*(price-firstPayment)*-1*Math.pow(1+rate/1200,months)/(1-Math.pow(1+rate/1200,months)))};window.countdown=countEnd=>{const diff=Math.floor((countEnd-new Date)/1e3);let days=Math.floor(diff/(60*60*24)),hours=Math.floor((diff-days*60*60*24)/60/60),minutes=Math.floor((diff-(hours*60*60+days*60*60*24))/60),seconds=Math.floor(diff-(hours*60*60+days*60*60*24+minutes*60));if(days<=9&&days>=0)days="0"+days;if(hours<=9&&hours>=0)hours="0"+hours;if(minutes<=9&&minutes>=0)minutes="0"+minutes;if(seconds<=9&&seconds>=0)seconds="0"+seconds;return{days:String(days),hours:String(hours),minutes:String(minutes),seconds:String(seconds)}};window.burgerMenu={isOpen:false,markupInitialized:false,open:function(){const burgerBtn=document.querySelector("[data-burger-menu]");burgerBtn.classList.add("-active");if(!burgerBtn.hasAttribute("data-half-menu"))document.body.classList.add("-locked");if(!this.markupInitialized)window.copyMainMenu();document.querySelector(".mobile-slide-out").classList.add("-shown");if(window.isHeaderFixed){document.querySelector(".mobile-slide-out").classList.add("is-fixed");document.querySelector(".mobile-slide-out").style.top=document.querySelector(".header-fixed").clientHeight+"px"}let icon=burgerBtn.querySelector("svg use");icon.setAttribute("xlink:href",icon.getAttribute("xlink:href").replace(/(^.*?#).*?$/g,"$1close"));this.markupInitialized=true;this.isOpen=true},close:function(){const burgerBtn=document.querySelector("[data-burger-menu]");burgerBtn.classList.remove("-active");if(!burgerBtn.hasAttribute("data-half-menu"))document.body.classList.remove("-locked");document.querySelector(".mobile-slide-out").classList.remove("-shown");let icon=burgerBtn.querySelector("svg use");icon.setAttribute("xlink:href",icon.getAttribute("xlink:href").replace(/(^.*?#).*?$/g,"$1menu"));this.isOpen=false},init:function(){const burgerBtn=document.querySelector("[data-burger-menu]");if(burgerBtn){burgerBtn.addEventListener("click",(e=>{e.preventDefault();return burgerBtn.classList.contains("-active")?this.close():this.open()}))}}};window.burgerMenu.init();window.copyMainMenu=()=>{if(!document.querySelector("[data-main-menu] ul")){throw Error("This element does not exist")}let mobileSlideOut=document.getElementById("mobile-slide-out").content.cloneNode(true),mobileSlideOutMain=mobileSlideOut.querySelector(".mobile-slide-out__main"),mobileSlideOutOther=mobileSlideOut.querySelector(".mobile-slide-out__other");const mainMenu=document.querySelector("[data-main-menu] ul").cloneNode(true);mainMenu.removeAttribute("class");mainMenu.querySelectorAll("*").forEach((el=>{const isAnchor=el.classList.contains("js-anchor");isAnchor?el.setAttribute("class","js-anchor"):el.removeAttribute("class")}));mobileSlideOutMain.append(mainMenu);const otherMenu=document.querySelectorAll("[data-other-menu]");if(otherMenu.length!==0){const pasteList=document.createElement("ul");otherMenu.forEach((el=>{let pasteEl=document.createElement("li");if(el.dataset.otherMenu==="phone"){pasteEl.classList.add("phone");pasteEl.append(el.querySelector("a").cloneNode(true))}if(el.dataset.otherMenu==="address"){pasteEl.classList.add("address");pasteEl.append(el.textContent)}pasteList.append(pasteEl)}));mobileSlideOutOther.append(pasteList)}document.body.append(mobileSlideOut);document.dispatchEvent(new Event("mobile-menu-created"))};const requiredFields=["mark","model","price","price-base","month-pay","year-auto","mileage","equipment","year","year-auto","color","condition"];function setPopupFields(that,popUpForm){popUpForm.querySelector('input[name="name"]').value=that.dataset.name;requiredFields.forEach((field=>{if(that.hasAttribute(`data-${field}`)){const selector=`input[name="property_${field.replace("-","_")}"]`;if(!popUpForm.querySelector(selector)){const input=document.createElement("input");input.type="hidden";input.name=`property_${field.replace("-","_")}`;popUpForm.prepend(input)}popUpForm.querySelector(selector).value=that.getAttribute(`data-${field}`)}}));if(that.hasAttribute("data-has-fields-on-page")){if(!that.closest(".js-fields-container"))throw new Error("Error! Not found js-fields-container");const fields=Array.from(that.closest(".js-fields-container").querySelectorAll('[name*="property_"]'));if(fields.length===0)throw new Error('Error! Not found fields with [name="property_"]');for(const field of fields){if(!field.tagName.toLowerCase()==="input"||!field.tagName.toLowerCase()==="select"||!field.tagName.toLowerCase()==="textarea"){continue}const selector=`input[name="${field.name}"]`;if(!popUpForm.querySelector(selector)){const input=document.createElement("input");input.type="hidden";input.name=field.name;popUpForm.prepend(input)}if(field.type==="checkbox"){if(field.checked)popUpForm.querySelector(selector).value+=field.value+", "}else{popUpForm.querySelector(selector).value=field.value}}}}function createPopup(that,popUp,popUpForm,modifierClass){if(that.dataset.title)popUp.querySelector(".popup__title").textContent=that.dataset.title||"";if(that.dataset.description&&popUp.querySelector(".popup__description")){popUp.querySelector(".popup__description").textContent=that.dataset.description||""}if(that.dataset.creditLabel||that.dataset.creditValue&&popUp.querySelector(".popup__credit")){popUp.querySelector(".popup__credit").classList.remove("d-none");popUp.querySelector(".popup-credit__label").textContent=that.dataset.creditLabel||"";popUp.querySelector(".popup-credit__value").textContent=that.dataset.creditValue||""}if(popUpForm){setPopupFields(that,popUpForm);const blockPasteFields=popUpForm.querySelectorAll("[name=property_name], [name=property_phone]");if(blockPasteFields.length>0){blockPasteFields.forEach((field=>{blockPasteEvent(field)}))}jsInput(popUpForm);popUpForm.addEventListener("submit",(function(e){e.preventDefault();submitForm(this)}))}const div=document.createElement("div");div.append(popUp);initialFancyBox(div,modifierClass||"-popup");addPhoneMask();addInputNameMask()}document.addEventListener("click",(function(e){let that=e.target,buildPopup=false;let btn,popUp,popUpForm,modifierClass;if(that.classList.contains("js-constructor-btn")||that.closest(".js-constructor-btn")){e.preventDefault();buildPopup=true;if(that.closest(".js-constructor-btn"))btn=that.closest(".js-constructor-btn");if(!btn.dataset.name){showNotify("Упс...",`Что-то пошло не так, попробуйте ещё раз или позвоните нам`,"danger");throw new Error("На задан name формы")}if(!btn.dataset.title)console.warn("Не задан заголовок формы");popUp=document.getElementById("popup").content.cloneNode(true);if(btn.dataset.modifierClass)modifierClass=btn.dataset.modifierClass}if(that.dataset.popup||that.closest("[data-popup]")){e.preventDefault();buildPopup=true;if(that.closest("[data-popup]"))btn=that.closest("[data-popup]");if(btn.dataset.popup.length>0){popUp=document.getElementById(`${btn.dataset.popup}`).content.cloneNode(true);btn.dataset.popup==="popup-banner"?modifierClass="-popup-banner":""}}if(buildPopup){popUpForm=popUp.querySelector("form");createPopup(btn,popUp,popUpForm,modifierClass);if(window.dataLayer&&typeof ecommerceData!=="undefined"){window.dataLayer.push(ecommerceData)}if(window.Ya&&window.Ya.Metrika2&&window.Ya.Metrika2.counters&&typeof Object.values(window.Ya.Metrika2.counters())[0].id!=="undefined"){yaReachGoal("allform")}}}));const footerCollapsedText=document.querySelector(".footer__text-btn-collapse");if(footerCollapsedText){footerCollapsedText.addEventListener("click",(function(e){e.preventDefault();const target=this.getAttribute("href");this.slideUp(250);document.querySelector(target).slideDown(250)}))}const tooltipTriggerList=document.querySelectorAll('[data-bs-toggle="tooltip"]');if(tooltipTriggerList.length>0){[...tooltipTriggerList].map((tooltipTriggerEl=>new bootstrap.Tooltip(tooltipTriggerEl)))}window.updateFavouriteItems=()=>{let isFavoriteActive=false,counter=0;if(window.favourite){Object.keys(window.favourite).forEach((key=>{counter+=window.favourite[key].length}));counter>0?isFavoriteActive=true:""}const addToFavouriteBtn=document.querySelectorAll(".add-to-favourite");if(addToFavouriteBtn.length>0){addToFavouriteBtn.forEach((el=>{if(bootstrap.Tooltip.getInstance(el)){bootstrap.Tooltip.getInstance(el).dispose()}if(window.favourite[el.dataset.carType].indexOf(el.dataset.addToFavourite)!==-1){el.classList.add("-active");el.setAttribute("title","Удалить из избранного")}else{el.classList.remove("-active");el.setAttribute("title","Добавить в избранное")}new bootstrap.Tooltip(el)}))}const favouriteLink=document.querySelectorAll(".favourite-link");if(favouriteLink.length>0){favouriteLink.forEach((el=>{if(isFavoriteActive){el.setAttribute("href","/favourite/");el.classList.add("-active");el.querySelector(".favourite-link__counter").textContent=counter.toString();el.querySelector(".favourite-link__counter").style.display="flex"}else{el.setAttribute("href","javascript:void(0)");el.classList.remove("-active");el.querySelector(".favourite-link__counter").textContent="";el.querySelector(".favourite-link__counter").style.display="none"}}))}};updateFavouriteItems();document.addEventListener("click",(function(e){let that=e.target;if(that.classList.contains("add-to-favourite")||that.closest(".add-to-favourite")){e.preventDefault();if(typeof that.dataset.addToFavourite==="undefined"){that=that.closest(".add-to-favourite")}const productId=that.dataset.addToFavourite,carType=that.dataset.carType;if(window.favourite[carType].indexOf(productId)!==-1){window.favourite[carType].splice(window.favourite[carType].indexOf(productId),1);window.showToast("Удалено","Успешно удалено из избранного","danger")}else{window.favourite[carType].push(productId);window.showToast("Добавлено","Успешно добавлено в избранное","success")}let date=new Date;setCookie("favourite",JSON.stringify(window.favourite),{expires:new Date(date.setDate(date.getDate()+7))});window.favouriteReload?window.location.reload():updateFavouriteItems()}}));(()=>{const popUpBannerHappy=document.getElementById("popup-banner-happy"),popUpBannerDefault=document.getElementById("popup-banner");if(popUpBannerHappy==null&&popUpBannerDefault==null){return}const timezone=window.timezone||3,startHappyHours=9,endHappyHours=13;const isHappyHours=(timezone,startHour,endHour)=>{const currentTime=new Date,UTCTime=new Date(currentTime.getTime()+(currentTime.getTimezoneOffset()+60*timezone)*6e4),currentUTCHour=UTCTime.getHours();return currentUTCHour>=startHour&&currentUTCHour<endHour};if(!isHappyHours(timezone,startHappyHours,endHappyHours)&&popUpBannerDefault==null){return}if(typeof getCookie("popup-banner-showed")==="undefined"){let popUpBanner;if(isHappyHours(timezone,startHappyHours,endHappyHours)&&popUpBannerHappy!=null){popUpBanner=document.getElementById("popup-banner-happy").content.cloneNode(true)}else{popUpBanner=document.getElementById("popup-banner").content.cloneNode(true)}const div=document.createElement("div");div.append(popUpBanner);new Promise((function(resolve){const timeoutCallback=()=>{if(!window.isFancyOpen){initialFancyBox(div,"-popup -popup-banner");return true}else{return false}};setTimeout((()=>{resolve(timeoutCallback())}),3e4)})).then((result=>{if(result){const forms=document.querySelectorAll(".popup-banner form");if(forms.length>0){forms.forEach((form=>{jsInput(form);form.addEventListener("submit",(function(e){e.preventDefault();submitForm(this)}));const blockPasteFields=form.querySelectorAll("[name=property_name], [name=property_phone]");if(blockPasteFields.length>0){blockPasteFields.forEach((field=>{blockPasteEvent(field)}))}}))}return true}})).then((result=>{if(result){let dateExpires=new Date;setCookie("popup-banner-showed",true,{expires:new Date(dateExpires.setHours(23,59,59))});addPhoneMask();addInputNameMask();return isHappyHours(timezone,startHappyHours,endHappyHours)}})).then((result=>{if(result){const countdownEl=document.getElementById("happy-countdown");if(countdownEl){const countEnd=(new Date).setHours(endHappyHours,0,0);setInterval((()=>{const countResult=countdown(countEnd);countdownEl.textContent=`${countResult.hours}:${countResult.minutes}:${countResult.seconds}`}),1e3)}}}))}})();window.cookieAgreement=()=>{const cookie_accept=getCookie("cookie-accept");if(typeof cookie_accept==="undefined"){const cookie_banner=document.getElementById("cookie").content.cloneNode(true);if(cookie_banner){document.body.appendChild(cookie_banner);const cookie_btn=document.querySelector(".cookie-banner__btn");cookie_btn.addEventListener("click",(function(){this.closest(".cookie-banner").remove();let cookie_date=new Date;setCookie("cookie-accept",true,{expires:new Date(cookie_date.setDate(cookie_date.getDate()+365))})}))}}};window.initSelect=(el,searchable=false)=>NiceSelect.bind(el,{searchable:searchable});window.imageLazyload={defaultOptions:{srcAttr:"data-lazyload",srcFallbackAttr:"data-src",altAttr:"data-alt",widthAttr:"data-width",heightAttr:"data-height"},load:function(image,callback){if(image.tagName==="IMG")return;var srcAttrOption=this.defaultOptions.srcAttr;var altAttrOption=this.defaultOptions.altAttr;var widthAttrOption=this.defaultOptions.widthAttr;var heightAttrOption=this.defaultOptions.heightAttr;var srcAttr=image.getAttribute(srcAttrOption)||image.getAttribute(this.defaultOptions.srcFallbackAttr);if(!srcAttr){console.error(image,"Required src attribute not provided");return}var altAttr=image.getAttribute(altAttrOption)||"";var widthAttr=image.getAttribute(widthAttrOption);var heightAttr=image.getAttribute(heightAttrOption);var newEl=document.createElement("img");image.removeAttribute(srcAttrOption);image.removeAttribute(this.defaultOptions.srcFallbackAttr);image.removeAttribute(altAttrOption);image.removeAttribute(widthAttrOption);image.removeAttribute(heightAttrOption);Array.prototype.slice.call(image.attributes).forEach((function(attr){newEl.setAttribute(attr.name,attr.value)}));newEl.setAttribute("src",encodeURI(srcAttr));newEl.setAttribute("alt",altAttr);if(widthAttr!==null){newEl.setAttribute("width",widthAttr)}if(heightAttr!==null){newEl.setAttribute("height",heightAttr)}image.parentNode.replaceChild(newEl,image);newEl.addEventListener("load",(function(){if(typeof callback==="function"){callback.call()}}))},init:function(){var obj=this;if("IntersectionObserver"in window){var observerCallback=function(images){images.forEach((function(entry){if(entry.isIntersecting){obj.observer.unobserve(entry.target);obj.load(entry.target)}}))};var observerConfig={rootMargin:"0px 0px 200px 0px",threshold:.1};this.observer=new IntersectionObserver(observerCallback,observerConfig);Array.prototype.slice.call(document.querySelectorAll("[data-lazyload]")).forEach((function(image){obj.observer.observe(image)}))}else{Array.prototype.slice.call(document.querySelectorAll("[data-lazyload]")).forEach((function(el){obj.load(el)}))}}};window.imageLazyload.init();document.addEventListener("click",(e=>{let that=e.target;if(that.classList.contains("js-anchor")||that.closest(".js-anchor")){e.preventDefault();if(that.closest(".js-anchor"))that=that.closest(".js-anchor");if(window.burgerMenu.isOpen)window.burgerMenu.close();const blockID=that.getAttribute("href").substring(1);document.getElementById(blockID).scrollIntoView({behavior:"smooth",block:"start"})}}));const phoneLinks=document.querySelectorAll("[href^='tel']");if(phoneLinks.length>0){phoneLinks.forEach((el=>{el.addEventListener("click",(()=>yaReachGoal("order")))}))}const forms=document.forms;if(forms.length>0){for(const form of forms){jsInput(form)}}const noPasteFields=document.querySelectorAll("[name=property_name], [name=property_phone]");if(noPasteFields.length>0){noPasteFields.forEach((field=>blockPasteEvent(field)))}}));